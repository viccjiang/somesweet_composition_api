import{_ as z,u as B,B as N,a as S,r as c,w as V,o as j,d as k,e as l,f as n,g as e,h as p,i as x,F as y,n as U,j as m,k as L,z as M,t as v,l as D,m as H,x as R,y as $}from"./index-0d111a99.js";import{s as w}from"./LocalStorage-45b6b3d6.js";import{R as X}from"./RecommendProductsSwiper-06ec852a.js";const u=_=>(R("data-v-0d54c116"),_=_(),$(),_),O=u(()=>e("div",{class:"card border-0 rounded-0 bg-dark text-white mb-5"},[e("img",{class:"filters",style:{height:"200px","background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/jiangs2023/1678427520180.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=iiSXN5mn0QTpMZpCBona7iXC45A8l18MWoXV3f9zkFNXV47vzXChdxwu9AV0IoPn8ZEAiTgDHIUGAMcm9o7tFLdepA0zSQDRH7uVuFecAFC8WwDjdsW6atcFIgXJ3uS7Hxj8NLo98Z0GhE%2BkoNLEU%2BqsgqQie4yEQqMBm4CMhPBWWbPubph%2FPy78DCyigupkALfHCrkeE%2F23dLTuUHk%2B2SBwT9WsAp8znKZj%2FqKeCuBtzw%2BtGHdff34FmEM3%2Fa6eYoYePCg4A03db%2FHg9jPHcpf8zpJp4d2UuKcnM%2F1ToEU9zOC0NNmuH6876kGOdXsc9n4Pes7QbmNTZmkr5VzQvA%3D%3D)","background-size":"cover","background-position":"top top","background-attachment":"fixed"}}),e("div",{class:"card-img-overlay d-flex flex-column justify-content-center align-item-center"},[e("h1",{class:"card-title text-center fw-bold"},"願望清單")])],-1)),Q={class:"container mt-0 mt-md-10 mb-0 mb-md-10"},W={class:"g-4 row row-cols-1 row-cols-md-2 row-cols-lg-3 flex-column justify-content-center flex-md-row"},G={key:0,class:"d-flex flex-column justify-content-center align-items-center"},Z=u(()=>e("h3",{class:"text-center mb-2 pb-3"},"目前沒有收藏任何商品",-1)),q=u(()=>e("i",{class:"bi bi-bag"},null,-1)),J={class:"product card h-100 p-5 rounded-4 products-img"},K={class:"overflow-hidden rounded-4"},Y=["src","alt"],ee=["onClick"],te={key:0,style:{"z-index":"1"},class:"fs-1 bi bi-bookmark-heart-fill position-absolute top-0 start-15 text-warning"},se={key:1,style:{"z-index":"1"},class:"fs-1 bi bi-bookmark position-absolute top-0 start-15 text-white"},oe={class:"card-body d-flex flex-column"},ae={class:"fs-6 fw-bold card-title mb-6"},ie={class:"d-flex mt-auto"},ce={class:"text-muted fs-xs me-auto"},le={class:"card-text mb-0"},ne=u(()=>e("span",{class:"fs-xs d-flex align-items-end ms-1"},"NTD",-1)),de={class:"text-center border-0"},re=["disabled","onClick"],ue={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"},_e={class:"bg-light py-10"},me={class:"container"},pe=u(()=>e("p",{class:"fs-3 fw-bold py-2 text-dark text-start border-bottom mb-10"}," 你可能也會喜歡 ",-1)),ve={__name:"UserFavorite",setup(_){B();const{VITE_APP_URL:F,VITE_APP_PATH:P}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},A=N("$http"),C=S(),i=c([]);c({}),c({});const g=c({loadingItem:""}),o=c([]),d=c([]),h=c(!1),{addToCart:I}=C;function f(){const a=`${F}api/${P}/products/all`;h.value=!0,A.get(a).then(s=>{i.value=s.data.products,console.log(i.value),h.value=!1,s.data.success&&(i.value=s.data.products,b())})}function b(){d.value=[];const a=JSON.parse(localStorage.getItem("myFavorite"))||[];console.log(a);for(let s=0;s<i.value.length;s+=1)for(let r=0;r<a.length;r+=1)i.value[s].id===a[r]&&(console.log(i.value[s].id),d.value.push(i.value[s]),console.log(i.value[s]),console.log(d.value))}function E(a){o.value.includes(a.id)?(o.value.splice(o.value.indexOf(a.id),1),b(),f()):o.value.push(a.id)}return V(o,()=>{w.save(o.value)},{deep:!0}),j(()=>{f(),o.value=w.get()||[],console.log(o.value)}),(a,s)=>{const r=k("RouterLink"),T=k("router-link");return l(),n(y,null,[O,e("div",Q,[e("div",W,[d.value.length===0?(l(),n("div",G,[Z,p(r,{to:"/products",class:"btn btn-soft mb-5 mb-md-0"},{default:x(()=>[q,m(" 來去收藏喜歡的商品 ")]),_:1})])):(l(!0),n(y,{key:1},U(d.value,t=>(l(),n("div",{class:"col-md-4",key:t.id},[e("div",J,[e("div",K,[e("img",{src:t.imageUrl,class:"card-img-top object-fit rounded-4 position-relative card-imageUrl",alt:t.title},null,8,Y)]),e("a",{href:"#",onClick:L(ge=>E(t),["prevent"]),class:M([{active:o.value.includes(t.id)},"link-secondary d-block rounded-0"])},[o.value.includes(t.id)?(l(),n("i",te)):(l(),n("i",se))],10,ee),e("div",oe,[e("h5",ae,v(t.title),1),e("div",ie,[e("span",ce,[e("del",null,"NT$"+v(t.origin_price),1)]),e("p",le,"$"+v(t.price),1),m(),ne]),e("small",de,[p(T,{class:"text-dark d-block",to:`/product/${t.id}`},{default:x(()=>[m("查 看 細 節")]),_:2},1032,["to"])])]),e("button",{type:"buttom",class:"btn btn-primary mt-5",disabled:g.value.loadingItem===t.id,onClick:()=>D(I)(t.id)},[g.value.loadingItem===t.id?(l(),n("div",ue)):H("",!0),m(" 加入購物車 ")],8,re)])]))),128))])]),e("div",_e,[e("div",me,[pe,p(X)])])],64)}}},ke=z(ve,[["__scopeId","data-v-0d54c116"]]);export{ke as default};
