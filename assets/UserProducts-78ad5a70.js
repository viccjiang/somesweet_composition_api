import{_ as Y,B as j,a as X,r as n,b as H,K as W,w as $,o as Q,d as B,e as d,f as r,h as k,g as e,k as w,j as p,F as P,n as I,q as J,v as Z,M as ee,l as A,A as se,z as S,t as g,i as te,m as oe,x as ae,y as ie}from"./index-0d111a99.js";import{s as V}from"./LocalStorage-45b6b3d6.js";import{G as le}from"./GoTop-54a13e20.js";const v=m=>(ae("data-v-9149fe04"),m=m(),ie(),m),ce=se('<div class="container-fluid g-0" data-v-9149fe04><div class="card border-0 rounded-0 bg-dark text-white mb-5" data-v-9149fe04><div class="filters" style="height:200px;background-image:url(https://storage.googleapis.com/vue-course-api.appspot.com/jiangs2023/1677550181847.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&amp;Expires=1742169600&amp;Signature=qQpOKJlmAipjojZQ7imN6J6MiWWuxRYaXwXr6MdPijbdIRTjWFssPopTl5JN%2FjlUul1ccEWNcVdj2qhABmca1qXPqK9FnT1jz92lk4l7rOonpF8%2F7lVw8i%2BDI3KhGnoYIBBfmyQyRsPKI%2B8mHHakw9uegGVuY%2BXfxGLcBuYGsxhNU9UTy1fj4%2Fc07ANvqKpCrE66j9O2KJE%2B5VlGoCK8pKmBlmMjyLUXNSmESrPdR9696BuSHjvmYXdBWtAC6ODZLqXHs7P7vskYx3e23oggxpMBveQQCm8u3tqgCu6kjOE7EYtYucOEmah6Nsbuw6pUMfIhrj5xbebroqyayFKz8g%3D%3D);background-size:cover;background-position:center center;background-attachment:fixed;" data-v-9149fe04></div><div class="card-img-overlay d-flex flex-column justify-content-center align-item-center" data-v-9149fe04><h1 class="fs-3 card-title text-center fw-bold" data-v-9149fe04><p class="fs-m fw-bold mb-2" data-v-9149fe04>所有甜點</p><p class="logoText fs-sm p-0 m-0" data-v-9149fe04>SOME SWEET <span class="fs-xs fw-lighter" data-v-9149fe04>/am</span></p></h1></div></div></div>',1),ne={class:"container mt-md-5 mt-3 mb-7"},de={class:"row"},re={class:"col-md-3"},ue={class:"sticky-md-top position-md-sticky accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample",style:{"z-index":"100"}},pe={class:"card border-0 card-hover"},ve=v(()=>e("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[e("div",{class:"d-flex justify-content-between align-items-center pe-1"},[e("h4",{class:"mb-0"}," 產品類別 "),e("i",{class:"bi bi-chevron-down"})])],-1)),me={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},_e={class:"card-body py-0 p-0"},he=v(()=>e("i",{class:"bi bi-dash-lg"},null,-1)),ge={class:"list-unstyled list-group"},fe=["onClick"],be=v(()=>e("i",{class:"bi bi-dash-lg"},null,-1)),ye={class:"col-md-9"},xe={class:"row justify-content-end"},ke={class:"col-12 col-md-6"},we={class:"input-group ms-auto mb-4"},Pe=["onKeyup"],Ce=v(()=>e("i",{class:"bi bi-search"},null,-1)),Ee=[Ce],Te={class:"row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4"},je={class:"product card h-100 p-5 rounded-4 products-img"},$e={class:"overflow-hidden rounded-4"},Be=["src","alt"],Ie=["onClick"],Ae={key:0,style:{"z-index":"1"},class:"fs-1 bi bi-bookmark-heart-fill position-absolute top-0 start-15 text-warning"},Se={key:1,style:{"z-index":"1"},class:"fs-1 bi bi-bookmark position-absolute top-0 start-15 text-white"},Ve={class:"card-body d-flex flex-column"},Oe={class:"fs-6 fw-bold card-title mb-6"},Ne={class:"d-flex mt-auto"},Ue={class:"text-muted fs-xs me-auto"},Ke={class:"card-text mb-0"},Me=v(()=>e("span",{class:"fs-xs d-flex align-items-end ms-1"},"NTD",-1)),Fe={class:"text-center border-0"},Le=["disabled","onClick"],De={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"},ze={__name:"UserProducts",setup(m){const f=j("$http"),_=j("$Swal"),O=X(),{VITE_APP_URL:b,VITE_APP_PATH:y}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/",VITE_APP_PATH:"jiangs2023",BASE_URL:"/somesweet/",MODE:"production",DEV:!1,PROD:!0},l=n([]),N=n({}),x=n(!1),U=n([]),u=n(""),i=n([]),h=n(""),C=n({}),{addToCart:K}=O,M=H();function F(s=1){f.get(`${b}api/${y}/products?page=${s}`).then(o=>{window.scrollTo(0,0);const{products:a,pagination:c}=o.data;a.value=a,c.value=c,console.log(a.value,c.value)})}function L(){const s=new Set;console.log(s),l.value.forEach(o=>{s.add(o.category)}),s.value=[...s],console.log(s.value)}function E(s){x.value=!0,f.get(`${b}api/${y}/products/all`).then(o=>{console.log(o),l.value=o.data.products,console.log(l.value),L();const{selectCategory:a}=M.params;console.log(a),x.value=!1,a&&(a.value=a),a!==""?N.value={}:F(s)})}function D(s){i.value.includes(s.id)?i.value.splice(i.value.indexOf(s.id),1):(i.value.push(s.id),q())}function T(){const s=`${b}api/${y}/products/all`;f.get(s).then(o=>{l.value=o.data.products,l.value=l.value.filter(a=>a.title.trim().match(h.value)),console.log(l.value),h.value=""})}function z(s){return`${parseInt(s,10).toFixed(0).replace(/./g,(a,c,t)=>c&&a!=="."&&(t.length-c)%3===0?`, ${a}`.replace(/\s/g,""):a)}`}function q(){console.log(_),_.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:o=>{o.addEventListener("mouseenter",_.stopTimer),o.addEventListener("mouseleave",_.resumeTimer)}}).fire({icon:"success",title:"已加入蒐藏清單"})}const R=W(()=>l.value.filter(s=>s.category.match(u.value)));return $(u,(s,o)=>{(s===""||o==="")&&(console.log(s,o),E())}),$(i,()=>{V.save(i.value)},{deep:!0}),Q(()=>{i.value=V.get()||[],E()}),(s,o)=>{const a=B("LoadingView"),c=B("router-link");return d(),r(P,null,[k(a,{active:x.value,loader:"bars",color:"#034D83"},null,8,["active"]),k(le),ce,e("div",ne,[e("div",de,[e("div",re,[e("div",ue,[e("div",pe,[ve,e("div",me,[e("div",_e,[e("a",{href:"#",class:"list-group-item list-group-item-action rounded-0 p-3",onClick:o[0]||(o[0]=w(t=>{u.value="",this.$route.params.selectCategory=""},["prevent"]))},[he,p(" 全部商品 ")]),e("div",ge,[(d(!0),r(P,null,I(U.value,t=>(d(),r("a",{href:"#",key:t,class:S(["list-group-item list-group-item-action rounded-0 p-3 border-0",{active:u.value===t}]),onClick:w(G=>{u.value=t,this.$route.params.selectCategory=t},["prevent"])},[be,p(" "+g(t),1)],10,fe))),128))])])])])])]),e("div",ye,[e("div",xe,[e("div",ke,[e("div",we,[J(e("input",{type:"search",class:"form-control border-primary p-2",onKeyup:ee(T,["enter"]),placeholder:"請輸入商品名稱","onUpdate:modelValue":o[1]||(o[1]=t=>h.value=t)},null,40,Pe),[[Z,h.value,void 0,{trim:!0}]]),e("button",{type:"button",class:"btn btn-primary px-5 px-lg-3",onClick:T},Ee)])])]),e("div",Te,[(d(!0),r(P,null,I(A(R),t=>(d(),r("div",{class:"col-md-4",key:t.id},[e("div",je,[e("div",$e,[e("img",{src:t.imageUrl,class:"card-img-top object-fit rounded-4 position-relative card-imageUrl",alt:t.title},null,8,Be)]),e("a",{href:"#",onClick:w(G=>D(t),["prevent"]),class:S([{active:i.value.includes(t.id)},"link-secondary d-block rounded-0"])},[i.value.includes(t.id)?(d(),r("i",Ae)):(d(),r("i",Se))],10,Ie),e("div",Ve,[e("h5",Oe,g(t.title),1),e("div",Ne,[e("span",Ue,[e("del",null,"NT$"+g(z(t.origin_price)),1)]),e("p",Ke,"$"+g(t.price),1),p(),Me]),e("small",Fe,[k(c,{class:"text-dark d-block",to:`/product/${t.id}`},{default:te(()=>[p("查 看 細 節")]),_:2},1032,["to"])])]),e("button",{type:"buttom",class:"btn btn-primary mt-5",disabled:C.value.loadingItem===t.id,onClick:()=>A(K)(t.id)},[C.value.loadingItem===t.id?(d(),r("div",De)):oe("",!0),p(" 加入購物車 ")],8,Le)])]))),128))])])])])],64)}}},Ye=Y(ze,[["__scopeId","data-v-9149fe04"]]);export{Ye as default};
